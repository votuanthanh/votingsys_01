{"version":3,"sources":["comment.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"comment.js","sourcesContent":["$(document).ready(function(){\n\n     $.ajaxSetup({\n        headers: {\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n    });\n\n    $('#form-comment').show();\n    $('#add-comment').on('click', function() {\n        divChangeAmount = $(this).parent();\n\n        if ( $('#form-comment').css('display') == 'none' ) {\n            $('#form-comment').show();\n            var labelHide = divChangeAmount.data('labelHide');\n            $('#add-comment').html(labelHide);\n        } else {\n            $('#form-comment').hide();\n            var labelAddComment = divChangeAmount.data('labelAddComment');\n            $('#add-comment').html(labelAddComment);\n        }\n    });\n\n    $('.comments').show();\n    $('#show-hide-list-comment').on('click', function() {\n        divChangeAmount = $(this).parent();\n\n        if ( $('.comments').css('display') == 'none' ) {\n            $('.comments').show();\n            var labelHide = divChangeAmount.data('labelHide');\n            $('#show-hide-list-comment').html(labelHide);\n            $('.hr-comment').css('display', 'block');\n        } else {\n            $('.comments').hide();\n            var labelShowComment = divChangeAmount.data('labelShowComment');\n            $('#show-hide-list-comment').html(labelShowComment);\n            $('.hr-comment').css('display', 'none');\n        }\n    });\n\n    $('.addComment').click(function(e){\n        e.preventDefault();\n        divChangeAmount = $(this).parent();\n        var pollId = divChangeAmount.data('pollId');\n        var route = $('#form-comment').attr('action');\n        var user = divChangeAmount.data('user');\n        var content = $('#content' + pollId).val();\n        var name = $('#name' + pollId).val();\n\n        var commentName = divChangeAmount.data('commentName');\n        var commentContent = divChangeAmount.data('commentContent');\n        var commentLimitName = divChangeAmount.data('commentLimitName');\n        var commentLimitContent = divChangeAmount.data('commentLimitContent');\n        var passValidate = true;\n\n        var pollId = divChangeAmount.data('pollId');\n        var content = $('#content' + pollId).val();\n        var name = $('#name' + pollId).val();\n\n        /* remove class error */\n        $('.comment-info-name, .comment-info-content').removeClass('error');\n        $('.comment-name-validate, .comment-content-validate').removeClass('alert alert-poll-set-ip').html('');\n\n        if (name.trim() == '') {\n            $('.comment-info-name').addClass('error');\n            $('.comment-name-validate').addClass('alert alert-poll-set-ip')\n                .html('<span class=\"glyphicon glyphicon-warning-sign\"></span>' + ' ' + commentName);\n\n            return false;\n        }\n\n        if (name.trim().length >= 100) {\n            $('.comment-info-name').addClass('error');\n            $('.comment-name-validate').addClass('alert alert-poll-set-ip')\n                .html('<span class=\"glyphicon glyphicon-warning-sign\"></span>' + ' ' + commentLimitName);\n\n            return false;\n        }\n\n        if (content.trim() == '') {\n            $('.comment-info-content').addClass('error');\n            $('.comment-name-validate').addClass('alert alert-poll-set-ip')\n                .html('<span class=\"glyphicon glyphicon-warning-sign\"></span>' + ' ' + commentContent);\n\n            return false;\n        }\n\n        if (content.trim().length >= 255) {\n            $('.comment-info-content').addClass('error');\n            $('.comment-name-validate').addClass('alert alert-poll-set-ip')\n                .html('<span class=\"glyphicon glyphicon-warning-sign\"></span>' + ' ' + commentLimitContent);\n\n            return false;\n        }\n\n        $.ajax({\n            type: 'POST',\n            url: route,\n            dataType: 'JSON',\n            data: {\n                'poll_id': pollId,\n                'content': content,\n                'name': name,\n            },\n            success: function(data){\n                if (data.success) {\n                    $('#content' + pollId).val('');\n                    $('.comments').append(data.html);\n                    var commentCount = $('.comment-count').html();\n                    $('.comment-count').html(parseInt(commentCount) + 1);\n                }\n            }\n        });\n    });\n\n    $(document).on( 'click', '.delete-comment', function (e) {\n        e.preventDefault();\n        var confirmRemove = $('.js-remove-comment').data('confirmRemove');\n\n        if (confirm(confirmRemove)) {\n            divChangeAmount = $(this).parent();\n            var commentId = divChangeAmount.data('commentId');\n            var pollId = divChangeAmount.data('pollId');\n            var route = $('.js-remove-comment').data('route');\n\n            $.ajax({\n                type: 'POST',\n                url: route + '/' + commentId,\n                dataType: 'JSON',\n                data: {\n                    '_method': 'DELETE',\n                    'comment_id': commentId,\n                    'poll_id': pollId,\n                },\n                success: function(data){\n                    if (data.success) {\n                        $('#' + commentId).hide();\n                        var commentCount = $('.comment-count').html();\n                        $('.comment-count').html(parseInt(commentCount) - 1);\n                    }\n                }\n            });\n        }\n    });\n});\n"]}